# =============================================================================
# IDLE CHAMPIONS: SYNTHETIC - DEFAULT CONFIGURATION
# =============================================================================
# Version: 0.1
# This is the base configuration file for the data generator.
# Override specific values using files in configs/overrides/

# =============================================================================
# SIMULATION PARAMETERS
# =============================================================================
simulation:
  seed: 42                        # Random seed for reproducibility
  start_date: "2025-01-01"        # Simulation start date
  duration_days: 90               # Duration in days

# =============================================================================
# INSTALL DISTRIBUTION
# =============================================================================
installs:
  total: 50000                    # Total installs for the period

  # Daily install distribution
  distribution: "decay"           # decay | uniform | custom
  decay_rate: 0.02                # For decay: exponential decay rate

  # Traffic sources
  sources:
    organic:
      share: 0.40
      retention_modifier: 1.0
      monetization_modifier: 1.0
    google_ads:
      share: 0.25
      retention_modifier: 0.9
      monetization_modifier: 1.1
    facebook:
      share: 0.20
      retention_modifier: 0.85
      monetization_modifier: 1.05
    unity_ads:
      share: 0.10
      retention_modifier: 0.75
      monetization_modifier: 0.8
    influencer:
      share: 0.05
      retention_modifier: 1.1
      monetization_modifier: 0.9

# =============================================================================
# PLAYER TYPES
# =============================================================================
player_types:
  whale:
    share: 0.003
    spending_monthly_usd: [100, 500]
    sessions_per_day: [3, 6]
    session_duration_min: [15, 45]
    retention:
      d1: 0.85
      d7: 0.70
      d30: 0.55
      d90: 0.40
    ad_watch_probability: 0.1
    gacha_desire: 0.7
    arena_engagement: 0.95
    guild_engagement: 0.90

  dolphin:
    share: 0.012
    spending_monthly_usd: [10, 100]
    sessions_per_day: [2, 4]
    session_duration_min: [10, 30]
    retention:
      d1: 0.70
      d7: 0.45
      d30: 0.25
      d90: 0.12
    ad_watch_probability: 0.4
    gacha_desire: 0.5
    arena_engagement: 0.80
    guild_engagement: 0.70

  minnow:
    share: 0.035
    spending_monthly_usd: [1, 15]
    sessions_per_day: [1, 3]
    session_duration_min: [5, 20]
    retention:
      d1: 0.55
      d7: 0.30
      d30: 0.12
      d90: 0.05
    ad_watch_probability: 0.6
    gacha_desire: 0.35
    arena_engagement: 0.60
    guild_engagement: 0.50

  free_engaged:
    share: 0.25
    spending_monthly_usd: [0, 0]
    sessions_per_day: [2, 4]
    session_duration_min: [10, 25]
    retention:
      d1: 0.50
      d7: 0.25
      d30: 0.10
      d90: 0.04
    ad_watch_probability: 0.85
    gacha_desire: 0.4
    arena_engagement: 0.70
    guild_engagement: 0.60

  free_casual:
    share: 0.45
    spending_monthly_usd: [0, 0]
    sessions_per_day: [0.3, 1.5]
    session_duration_min: [3, 12]
    retention:
      d1: 0.40
      d7: 0.15
      d30: 0.05
      d90: 0.02
    ad_watch_probability: 0.50
    gacha_desire: 0.2
    arena_engagement: 0.30
    guild_engagement: 0.20

  free_churner:
    share: 0.25
    spending_monthly_usd: [0, 0]
    sessions_per_day: [1, 2]
    session_duration_min: [2, 8]
    retention:
      d1: 0.25
      d7: 0.05
      d30: 0.01
      d90: 0.002
    ad_watch_probability: 0.30
    gacha_desire: 0.1
    arena_engagement: 0.10
    guild_engagement: 0.05

# =============================================================================
# ECONOMY
# =============================================================================
economy:
  # Initial values for new players
  initial:
    gold: 1000
    gems: 100
    summon_tickets: 5
    energy: 120

  # Energy system
  energy:
    max: 120
    regen_minutes: 5              # 1 energy per N minutes
    stage_cost: 6

  # Stage rewards (per stage, scales with chapter)
  stage_rewards:
    gold_base: 100
    gold_per_chapter: 50
    exp_base: 20
    exp_per_chapter: 10

  # Idle rewards (per hour, scales with max stage)
  idle_rewards:
    gold_per_hour_base: 500
    gold_per_stage_mult: 0.05
    max_hours: 12

  # Hero levelup costs
  hero_levelup:
    gold_base: 100
    gold_per_level_mult: 1.15     # Exponential growth

# =============================================================================
# GACHA
# =============================================================================
gacha:
  # Costs
  single_gems: 300
  multi_gems: 2700                # 10% discount for 10-pull

  # Rates
  rates:
    common: 0.60
    rare: 0.30
    epic: 0.08
    legendary: 0.02

  # Pity system
  pity:
    threshold: 90                 # Guaranteed legendary at 90
    soft_pity_start: 75           # Increased rates from 75
    soft_pity_rate_boost: 0.05    # +5% per pull after soft pity

# =============================================================================
# SHOP / IAP
# =============================================================================
shop:
  products:
    starter_pack:
      price_usd: 0.99
      gems: 500
      summon_tickets: 10
      limit: 1                    # One-time purchase
    gems_tier1:
      price_usd: 4.99
      gems: 500
    gems_tier2:
      price_usd: 9.99
      gems: 1100
    gems_tier3:
      price_usd: 19.99
      gems: 2400
    gems_tier4:
      price_usd: 49.99
      gems: 6500
    gems_tier5:
      price_usd: 99.99
      gems: 14000
    monthly_pass:
      price_usd: 4.99
      gems_immediate: 300
      gems_daily: 100
      duration_days: 30

  # Rewarded Ads
  ads:
    reward_gems: 50
    max_per_day: 5
    cooldown_minutes: 30

# =============================================================================
# VIP SYSTEM
# =============================================================================
vip:
  levels:
    0: { threshold: 0, energy_bonus: 0, gold_bonus: 0 }
    1: { threshold: 5, energy_bonus: 10, gold_bonus: 0 }
    2: { threshold: 15, energy_bonus: 10, gold_bonus: 0 }
    3: { threshold: 30, energy_bonus: 10, gold_bonus: 0.2 }
    4: { threshold: 50, energy_bonus: 10, gold_bonus: 0.2 }
    5: { threshold: 100, energy_bonus: 20, gold_bonus: 0.2 }
    6: { threshold: 200, energy_bonus: 20, gold_bonus: 0.2 }
    7: { threshold: 500, energy_bonus: 20, gold_bonus: 0.5 }
    8: { threshold: 1000, energy_bonus: 30, gold_bonus: 0.5 }
    9: { threshold: 2000, energy_bonus: 30, gold_bonus: 1.0 }
    10: { threshold: 5000, energy_bonus: 40, gold_bonus: 1.0 }

# =============================================================================
# PROGRESSION
# =============================================================================
progression:
  # Campaign
  chapters: 20
  stages_per_chapter: 10

  # Power requirements (base, scales exponentially)
  stage_power:
    base: 100
    per_stage_mult: 1.08

  # Player level
  player_level:
    max: 100
    exp_per_level_base: 100
    exp_per_level_mult: 1.12

  # Feature unlocks
  unlocks:
    gacha: 3
    daily_quests: 5
    events: 5
    arena: 10
    guild: 15

# =============================================================================
# HEROES
# =============================================================================
heroes:
  # Hero pool (simplified: ID pattern + count per rarity)
  pool:
    common: 20                    # hero_common_001 ... hero_common_020
    rare: 15                      # hero_rare_001 ... hero_rare_015
    epic: 10                      # hero_epic_001 ... hero_epic_010
    legendary: 5                  # hero_legendary_001 ... hero_legendary_005

  # Base power by rarity
  base_power:
    common: 50
    rare: 100
    epic: 200
    legendary: 400

  # Power scaling
  power_per_level: 10
  power_per_star_mult: 1.2        # Each star = 20% more power

# =============================================================================
# SOCIAL
# =============================================================================
social:
  # Arena
  arena:
    daily_attempts: 5
    attempt_cost_gems: 50
    rating_start: 1000
    rating_k_factor: 32           # ELO K-factor

  # Guilds
  guilds:
    count: 500                    # Number of guilds to simulate
    max_members: 30
    boss_daily_attempts: 1

# =============================================================================
# A/B TESTS
# =============================================================================
ab_tests:
  onboarding_length:
    enabled: true
    variants: ["control", "short", "extended"]
    weights: [0.33, 0.33, 0.34]
    effects:
      control:
        tutorial_steps: 8
      short:
        tutorial_steps: 4
        d1_retention_mult: 1.05
        d7_retention_mult: 0.92
      extended:
        tutorial_steps: 12
        d1_retention_mult: 0.97
        d7_retention_mult: 1.04

  starter_pack_price:
    enabled: true
    variants: ["control", "higher", "lower"]
    weights: [0.33, 0.33, 0.34]
    effects:
      control:
        price_usd: 0.99
      higher:
        price_usd: 1.99
        conversion_mult: 0.60
      lower:
        price_usd: 0.49
        conversion_mult: 1.60

  gacha_pity_display:
    enabled: true
    variants: ["control", "visible"]
    weights: [0.50, 0.50]
    effects:
      control:
        pity_visible: false
      visible:
        pity_visible: true
        gacha_desire_mult_above_50_pity: 1.15

  energy_regen_rate:
    enabled: true
    variants: ["control", "fast", "slow"]
    weights: [0.33, 0.33, 0.34]
    effects:
      control:
        regen_minutes: 5
      fast:
        regen_minutes: 4
        sessions_mult: 1.20
        energy_purchase_mult: 0.70
      slow:
        regen_minutes: 6
        sessions_mult: 0.85
        energy_purchase_mult: 1.25

  ad_reward_amount:
    enabled: true
    variants: ["control", "generous", "stingy"]
    weights: [0.33, 0.33, 0.34]
    effects:
      control:
        reward_gems: 50
      generous:
        reward_gems: 100
        ad_watch_mult: 1.40
        iap_conversion_mult: 0.90
      stingy:
        reward_gems: 25
        ad_watch_mult: 0.70
        iap_conversion_mult: 1.05

  late_game_offer:
    enabled: true
    variants: ["control", "discount_50", "bonus_hero"]
    weights: [0.33, 0.33, 0.34]
    activation_condition: "days_since_install >= 30"
    effects:
      control: {}
      discount_50:
        iap_conversion_mult: 1.25
      bonus_hero:
        iap_conversion_mult: 1.15
        d30_d60_retention_mult: 1.10

# =============================================================================
# SPECIAL SCENARIOS
# =============================================================================
scenarios:
  bad_traffic:
    enabled: true
    day: 25                       # Day of simulation
    source_name: "fake_network"
    volume: 2000
    retention_modifier: 0.3
    monetization_modifier: 0.1
    bot_ratio: 0.4                # 40% are bots

# =============================================================================
# OUTPUT
# =============================================================================
output:
  format: "jsonl"                 # jsonl | parquet | both
  compression: "gzip"             # none | gzip (for jsonl)
  batch_size: 10000               # Events per batch write
  include_metadata: true          # Generate metadata.json

# =============================================================================
# DEVICE SIMULATION
# =============================================================================
devices:
  platforms:
    ios: 0.45
    android: 0.55

  countries:
    RU: 0.40
    US: 0.15
    DE: 0.10
    BR: 0.10
    JP: 0.08
    KR: 0.07
    other: 0.10

  # Model pools
  ios_models:
    - "iPhone 12"
    - "iPhone 13"
    - "iPhone 14"
    - "iPhone 15"
    - "iPad Air"

  android_models:
    - "Samsung Galaxy S21"
    - "Samsung Galaxy S22"
    - "Pixel 6"
    - "Pixel 7"
    - "Xiaomi 12"

  app_versions:
    - "1.0.0"
    - "1.0.1"
    - "1.1.0"
    - "1.2.0"

  app_version_weights: [0.05, 0.10, 0.25, 0.60]  # Most users on latest
